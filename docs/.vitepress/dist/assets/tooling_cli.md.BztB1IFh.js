import{_ as e,o as s,c as t,ag as i}from"./chunks/framework.DEqXEGcv.js";const u=JSON.parse('{"title":"CLI Reference","description":"","frontmatter":{"title":"CLI Reference"},"headers":[],"relativePath":"tooling/cli.md","filePath":"tooling/cli.md"}'),l={name:"tooling/cli.md"};function d(n,a,h,r,o,p){return s(),t("div",null,[...a[0]||(a[0]=[i('<h1 id="cli-reference" tabindex="-1">CLI Reference <a class="header-anchor" href="#cli-reference" aria-label="Permalink to &quot;CLI Reference&quot;">​</a></h1><p>The <code>lux</code> command-line interface is the primary tool for developing, building, and running Lux applications. It runs on <a href="https://bun.sh" target="_blank" rel="noreferrer">Bun</a> and is located at <code>bin/lux.js</code>.</p><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bun</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lux-lang</span></span></code></pre></div><p>After installation, the <code>lux</code> command is available globally (or via <code>bunx lux</code>).</p><h2 id="commands" tabindex="-1">Commands <a class="header-anchor" href="#commands" aria-label="Permalink to &quot;Commands&quot;">​</a></h2><h3 id="lux-new-name" tabindex="-1"><code>lux new &lt;name&gt;</code> <a class="header-anchor" href="#lux-new-name" aria-label="Permalink to &quot;`lux new &lt;name&gt;`&quot;">​</a></h3><p>Scaffold a new Lux project.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-app</span></span></code></pre></div><p>This creates a project directory with:</p><ul><li><code>src/app.lux</code> -- a starter full-stack application with shared types, a server route, and a reactive client</li><li><code>package.json</code> -- configured with <code>dev</code> and <code>build</code> scripts</li><li><code>README.md</code> -- basic project documentation</li></ul><p>After scaffolding:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-app</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bun</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bun</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><h3 id="lux-run-file" tabindex="-1"><code>lux run &lt;file&gt;</code> <a class="header-anchor" href="#lux-run-file" aria-label="Permalink to &quot;`lux run &lt;file&gt;`&quot;">​</a></h3><p>Compile and execute a single <code>.lux</code> file with Bun. The full standard library is automatically available.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/app.lux</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/app.lux</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --debug</span></span></code></pre></div><p>You can also pass a <code>.lux</code> file directly without the <code>run</code> subcommand:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.lux</span></span></code></pre></div><p><strong>Flags:</strong></p><table tabindex="0"><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>--debug</code></td><td>Show verbose error output with full stack traces</td></tr></tbody></table><h3 id="lux-build-dir" tabindex="-1"><code>lux build [dir]</code> <a class="header-anchor" href="#lux-build-dir" aria-label="Permalink to &quot;`lux build [dir]`&quot;">​</a></h3><p>Compile all <code>.lux</code> files in a directory to JavaScript. The default source directory is the current directory, and output goes to <code>.lux-out/</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --output</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --production</span></span></code></pre></div><p><strong>Output structure:</strong></p><table tabindex="0"><thead><tr><th>File</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;name&gt;.shared.js</code></td><td>Shared types and functions</td></tr><tr><td><code>&lt;name&gt;.server.js</code></td><td>Default server block code</td></tr><tr><td><code>&lt;name&gt;.server.&lt;block&gt;.js</code></td><td>Named server blocks (e.g., <code>app.server.api.js</code>)</td></tr><tr><td><code>&lt;name&gt;.client.js</code></td><td>Default client block code</td></tr><tr><td><code>runtime/</code></td><td>Copied runtime files (reactivity, RPC, router)</td></tr></tbody></table><p><strong>Flags:</strong></p><table tabindex="0"><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>--output</code>, <code>-o</code></td><td>Output directory (default: <code>.lux-out</code>)</td></tr><tr><td><code>--production</code></td><td>Production build with bundling, content hashing, and minification</td></tr><tr><td><code>--debug</code></td><td>Verbose error output</td></tr></tbody></table><h3 id="lux-dev-dir" tabindex="-1"><code>lux dev [dir]</code> <a class="header-anchor" href="#lux-dev-dir" aria-label="Permalink to &quot;`lux dev [dir]`&quot;">​</a></h3><p>Start the development server with automatic file watching and rebuilds.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8080</span></span></code></pre></div><p>The dev server compiles all <code>.lux</code> files, starts server processes, serves client HTML, and watches for file changes with automatic rebuilds.</p><p><strong>Flags:</strong></p><table tabindex="0"><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>--port</code></td><td>Server port (default: <code>3000</code>)</td></tr><tr><td><code>--debug</code></td><td>Verbose error output</td></tr></tbody></table><p>See <a href="./dev-server.html">Dev Server</a> for more details.</p><h3 id="lux-repl" tabindex="-1"><code>lux repl</code> <a class="header-anchor" href="#lux-repl" aria-label="Permalink to &quot;`lux repl`&quot;">​</a></h3><p>Start an interactive Read-Eval-Print Loop.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repl</span></span></code></pre></div><p>The REPL supports multi-line input, full standard library access, and special commands like <code>:quit</code>, <code>:help</code>, and <code>:clear</code>.</p><p>See <a href="./repl.html">REPL</a> for more details.</p><h3 id="lux-test-dir" tabindex="-1"><code>lux test [dir]</code> <a class="header-anchor" href="#lux-test-dir" aria-label="Permalink to &quot;`lux test [dir]`&quot;">​</a></h3><p>Discover and run <code>test</code> blocks in <code>.lux</code> files.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;math&quot;</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --watch</span></span></code></pre></div><p><strong>Flags:</strong></p><table tabindex="0"><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>--filter</code></td><td>Run only tests matching the given pattern</td></tr><tr><td><code>--watch</code></td><td>Watch for file changes and re-run tests</td></tr></tbody></table><p>See <a href="./test-runner.html">Test Runner</a> for more details.</p><h3 id="lux-fmt-files" tabindex="-1"><code>lux fmt [files]</code> <a class="header-anchor" href="#lux-fmt-files" aria-label="Permalink to &quot;`lux fmt [files]`&quot;">​</a></h3><p>Format <code>.lux</code> source files for consistent style.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fmt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/app.lux</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fmt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/app.lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/utils.lux</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fmt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/app.lux</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --check</span></span></code></pre></div><p><strong>Flags:</strong></p><table tabindex="0"><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>--check</code></td><td>Check formatting without modifying files (exits with code 1 if changes needed)</td></tr></tbody></table><p>See <a href="./formatter.html">Formatter</a> for more details.</p><h3 id="lux-lsp" tabindex="-1"><code>lux lsp</code> <a class="header-anchor" href="#lux-lsp" aria-label="Permalink to &quot;`lux lsp`&quot;">​</a></h3><p>Start the Language Server Protocol server. This is typically invoked by editors rather than run directly.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lsp</span></span></code></pre></div><p>The LSP communicates via JSON-RPC over stdio and provides diagnostics, completion, go-to-definition, hover, and signature help.</p><p>See <a href="./../editor/lsp.html">LSP Server</a> for more details.</p><h3 id="lux-migrate-create-name" tabindex="-1"><code>lux migrate:create &lt;name&gt;</code> <a class="header-anchor" href="#lux-migrate-create-name" aria-label="Permalink to &quot;`lux migrate:create &lt;name&gt;`&quot;">​</a></h3><p>Create a new migration file in the <code>migrations/</code> directory.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add_users_table</span></span></code></pre></div><p>This generates a timestamped migration file like <code>20260213143022_add_users_table.js</code> with <code>up</code> and <code>down</code> SQL templates.</p><h3 id="lux-migrate-up-file" tabindex="-1"><code>lux migrate:up [file]</code> <a class="header-anchor" href="#lux-migrate-up-file" aria-label="Permalink to &quot;`lux migrate:up [file]`&quot;">​</a></h3><p>Run all pending migrations against the database configured in your <code>.lux</code> file.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:up</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:up</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/app.lux</span></span></code></pre></div><p>The command reads the <code>db</code> configuration from the specified <code>.lux</code> file (or auto-discovers <code>main.lux</code> / <code>app.lux</code>), creates a <code>__migrations</code> tracking table if needed, and executes any unapplied migration files in order.</p><h3 id="lux-migrate-status-file" tabindex="-1"><code>lux migrate:status [file]</code> <a class="header-anchor" href="#lux-migrate-status-file" aria-label="Permalink to &quot;`lux migrate:status [file]`&quot;">​</a></h3><p>Show the current status of all migrations.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:status</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/app.lux</span></span></code></pre></div><p>Displays each migration file with its status (<code>applied</code> with timestamp, or <code>pending</code>).</p><h2 id="global-flags" tabindex="-1">Global Flags <a class="header-anchor" href="#global-flags" aria-label="Permalink to &quot;Global Flags&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>--help</code>, <code>-h</code></td><td>Show help message</td></tr><tr><td><code>--version</code>, <code>-v</code></td><td>Show Lux version</td></tr><tr><td><code>--debug</code></td><td>Verbose error output (available on most commands)</td></tr></tbody></table><h2 id="environment-variables" tabindex="-1">Environment Variables <a class="header-anchor" href="#environment-variables" aria-label="Permalink to &quot;Environment Variables&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>PORT</code></td><td>Port for the default server block</td></tr><tr><td><code>PORT_&lt;NAME&gt;</code></td><td>Port for a named server block (e.g., <code>PORT_API</code>, <code>PORT_EVENTS</code>)</td></tr><tr><td><code>DEBUG</code></td><td>Enable debug output (equivalent to <code>--debug</code>)</td></tr></tbody></table>',72)])])}const k=e(l,[["render",d]]);export{u as __pageData,k as default};
